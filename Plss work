import dayjs from 'dayjs';
import moment from 'moment';
import { constants } from '../../utils/constants';

test('handleDateSelect formats and sets selectedDate correctly', () => {
  const mockSetSelectedDate = jest.fn();

  const handleDateSelect = (date: dayjs.Dayjs | null) => {
    if (date) {
      const dayjsDate = dayjs(date);
      const jsDate: Date = dayjsDate.toDate();
      const dateOnly = new Date(jsDate);
      mockSetSelectedDate(dateOnly ? moment(dateOnly).format(constants.DATE_FORMAT) : '');
    }
  };

  const input = dayjs('2025-07-02');
  handleDateSelect(input);

  expect(mockSetSelectedDate).toHaveBeenCalledWith('02/07/2025'); // or '07/02/2025' based on your locale format
});
