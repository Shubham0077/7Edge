import { render, screen } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import CreditcardBillPaymentCASA from '../../pages/CreditcardBillPaymentCASA';
import MockReduxProvider from '../../utils/MockReduxProvider';

test('selecting CUSTOM_AMOUNT_DUE renders the input field', async () => {
  const user = userEvent.setup();

  render(
    <MockReduxProvider>
      <CreditcardBillPaymentCASA />
    </MockReduxProvider>
  );

  // Find all radio buttons
  const radios = screen.getAllByRole('radio');

  // Find the radio with value "CUSTOM_AMOUNT_DUE"
  const customRadio = radios.find(
    (radio) => radio.getAttribute('value') === 'CUSTOM_AMOUNT_DUE'
  );

  expect(customRadio).toBeDefined();
  await user.click(customRadio!);

  // Confirm the custom-amount-due input now appears
  const wrapper = await screen.findByTestId('custom-amount-due');
  expect(wrapper).toBeInTheDocument();
});
