import { render, screen } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import ResetPinScreen from '../../pages/ResetPinScreen'; // or your real component
import MockReduxProvider from '../../utils/MockReduxProvider';

test('updates selectedMonthOption and resets billingCycleDate', async () => {
  const user = userEvent.setup();

  render(
    <MockReduxProvider>
      <ResetPinScreen />
    </MockReduxProvider>
  );

  // üîç Step 1: Get dropdown trigger
  const monthDropdown = screen.getByTestId('month-dropdown');

  // üñ± Step 2: Open dropdown
  await user.click(monthDropdown);

  // ‚úÖ Step 3: Click visible label ('July') ‚Äî triggers handler with value '6'
  const option = await screen.findByText('July');
  await user.click(option);

  // ‚úÖ Step 4: Assert that dropdown reflects new selection
  expect(monthDropdown).toHaveTextContent('July');

  // Optional: Assert other state resets
  // expect(screen.getByTestId('billingCycleDate')).toHaveValue('');
});
